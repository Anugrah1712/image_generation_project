# Databricks App Configuration
# Place this file at the root of your GitHub repository

name: imagegenerator-app
description: Full-stack AI Image Generator (FastAPI + React) deployed on Databricks Apps

components:
  # ğŸ§  Backend (FastAPI)
  - name: backend
    type: server
    runtime: python:3.10
    entry_point: backend/main.py
    build:
      requirements: backend/requirements.txt
    command: uvicorn main:app --host 0.0.0.0 --port 8000
    ports:
      - port: 8000
        expose: true

  # ğŸ’» Frontend (React)
  - name: frontend
    type: web_static
    runtime: nodejs:18
    source: frontend/
    build:
      command: |
        npm install
        npm run build
    routes:
      - path: /
        serve_from: frontend/build

# ğŸŒ Environment variables
env:
  - name: ENVIRONMENT
    value: production
  - name: API_URL
    value: /generate
